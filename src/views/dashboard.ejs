<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CLIENT CONNECT</title>

  <!--jQuery-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!--Client Side Javascript for ToDo Pop-Up-->
  <script src="/scripts/addToDo.js"></script>


  <!--FONT AWESOME-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!--STYLESHEETS-->
  <link rel="stylesheet" href="/styles/style.css">
  <link rel="stylesheet" href="/styles/addToDoPopUp.css">


  <!--DATA TABLES-->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.0/css/jquery.dataTables.css">
  <script type="text/javascript" charset="utf8"
    src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.js"></script>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


  <%- include('partials/_sideBar') %>
</head>

<body>
  <!-- Dashboard Containers -->
  <div class="main">

    <!--Grid for Calendar and Client List-->
    <div class="calendar-client-box">
      <div id="calendar-box">
        <div class="content-box bg-white shadow-sm">
          <h4>YOUR WEEK</h4>
          <div>
          </div>
          <div>
            <%- include('partials/_calendar.ejs') %>
          </div>
        </div>
      </div>
      <div class="mb-3 col-xl-6" id="client-list-box">
        <div class="content-box bg-white shadow-sm">
          <h4>CLIENT LIST</h4>
          <%- include('partials/clientList.ejs') %>
        </div>

        <div>
          <button id="open-confirmation">ADD NEW CLIENT</button>
          <!--CONFIRMATION POP UP-->
          <div id="confirmation-popup">
            <p>Is this a New or Returning Client?</p>
            <div id="new-btn"><span id="new">NEW</span></div>
            <div id="returning-btn"><span id="returning">RETURNING</span></div>
            <!--<div id="cancel-btn"><span id="cancel">CANCEL</span></div>-->
          </div>

        </div>
      </div>

    </div>

    <!-- Full box for ToDo list -->
    <div class="content-box mb-3 bg-white shadow-sm">
      <h4>TO-DO</h4>
      <p id="to-do-box"></p>
      <div>
        <button id="openToDoButton" class="open-button" onclick="openAddToDoForm()"><i
            class="fa fa-plus"></i>ADD</button>
      </div>
      <div class="form-popup" id="addToDo">
        <form id="addToDoForm">
          <div class="form-group">
            <label for="toDoText"><b>Activity</b></label>
            <input class="form-control" type="text" placeholder="" name="toDo">
            <div>

              <label for="client"><b>Related to Client</b></label>
              <select class="form-control" name="client" id="client">
                <% for (let i=0; i < result.rows.length; i++){ %>
                  <option value="<%= result.rows[i].name %>">
                    <%= result.rows[i].name %>
                  </option>
                  <% } %>
              </select>

              <label for="date"><b>Date</b></label>
              <input class="form-control" type="date" placeholder="date" name="date">

              <label for="time"><b>Time</b></label>
              <input class="form-control" type="time" placeholder="time" name="time">
              <div>
                <button class="submit-btn">ADD</button>
                <button type="button" class="btn cancel" onclick="closeAddToDoForm()">CLOSE</button>
              </div>
            </div>
        </form>
      </div>

    </div>
    <%- include('partials/toDos.ejs') %>


  </div>
</body>
<script>
  $(document).ready(function () {
    //Opens Popup
    $('#open-confirmation').click(function () {
      $('#confirmation-popup').show();
    })
    //Links to Intake
    $('#new').click(function () {
      window.location.href = '/intakeForm';
    })
    //Links to Client Dirtectory
    $('#returning').click(function () {
      window.location.href = '/clients';
    })
    //Cancel to close
    $('close').click(function () {
      $('#confirmation-popup').hide();
    })

  })

</script>

</html>